# Feature 2.8: Resizable Sidebar

**Status**: Not Started
**Dependencies**: Feature 2 Phase 1 (Sidebar + Track List)
**Estimated Time**: 1-2 days
**Priority**: Low (nice-to-have)

---

## Goal

Add a drag handle to make the sidebar resizable, allowing users to adjust the width between 250px and 600px.

---

## Context

**Current State:**
- Sidebar fixed at 350px
- Works well but some users may want more/less space

**You're Adding:**
- Drag handle on left edge of sidebar
- Resize by dragging (min 250px, max 600px)
- Sidebar width defaults to 350px (no localStorage persistence)
- Smooth resize with visual feedback

---

## Acceptance Criteria

- [ ] Drag handle visible on left edge of sidebar
- [ ] Dragging resizes sidebar smoothly
- [ ] Width constrained: 250px min, 600px max
- [ ] Map area adjusts as sidebar resizes (flex layout)
- [ ] Cursor changes to col-resize on hover
- [ ] Visual feedback during drag (highlight handle)
- [ ] Width resets to 350px on page reload
- [ ] Resize works on desktop only (not mobile)

---

## Implementation Sequence

### Step 1: Create ResizeHandle Component

**Create `frontend/src/components/TrackList/ResizeHandle.tsx`:**
```typescript
import { useState, useEffect } from 'react';

interface ResizeHandleProps {
  onResize: (width: number) => void;
}

export function ResizeHandle({ onResize }: ResizeHandleProps) {
  const [isResizing, setIsResizing] = useState(false);

  const handleMouseDown = (e: React.MouseEvent) => {
    e.preventDefault();
    setIsResizing(true);
  };

  useEffect(() => {
    if (!isResizing) return;

    const handleMouseMove = (e: MouseEvent) => {
      const newWidth = window.innerWidth - e.clientX;
      const clampedWidth = Math.min(Math.max(newWidth, 250), 600);
      onResize(clampedWidth);
    };

    const handleMouseUp = () => {
      setIsResizing(false);
    };

    document.addEventListener('mousemove', handleMouseMove);
    document.addEventListener('mouseup', handleMouseUp);

    return () => {
      document.removeEventListener('mousemove', handleMouseMove);
      document.removeEventListener('mouseup', handleMouseUp);
    };
  }, [isResizing, onResize]);

  return (
    <div
      className={`resize-handle ${isResizing ? 'resizing' : ''}`}
      onMouseDown={handleMouseDown}
    />
  );
}
```

---

### Step 2: Add Resize Handle to TrackList

```typescript
export function TrackList({ selectedTrackId, onSelect }) {
  const [width, setWidth] = useState(350);

  return (
    <div className="track-list" style={{ width: `${width}px` }}>
      <ResizeHandle onResize={setWidth} />
      {/* existing content */}
    </div>
  );
}
```

---

### Step 3: Add CSS for Resize Handle

```css
.resize-handle {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  cursor: col-resize;
  background: transparent;
  transition: background 0.2s ease;
  z-index: 10;
}

.resize-handle:hover {
  background: var(--color-border);
}

.resize-handle.resizing {
  background: var(--color-primary);
}

.resize-handle.resizing ~ * {
  user-select: none;
  pointer-events: none;
}
```

---

## Testing

- [ ] Drag handle appears on hover
- [ ] Dragging resizes sidebar smoothly
- [ ] Width clamped to 250-600px
- [ ] Map area adjusts (flex layout)
- [ ] Cursor changes to col-resize
- [ ] Release mouse stops resize
- [ ] Width resets to 350px on reload
- [ ] No resize on mobile

---

**Prompt Version**: 1.0
**Created**: After Feature 2 Phase 1, split from 02.5
